# Backend Configuration
SERVER_PORT=5200
LOG_LEVEL=info

# Database Configuration
DB_URL=postgres://postgres:postgres@postgres:5432/notebook
DB_SCHEMA=nbk

# Ingestion Pipeline Configuration
MAX_UPLOAD_MB=100
EMBED_API_URL=http://embedder:8000
EMBED_MODEL_NAME=intfloat/multilingual-e5-large
RAG_CHUNK_MAX_TOKENS=800
RAG_CHUNK_OVERLAP_TOKENS=200
CHUNK_TOKENS_MAX=1800
CHUNK_OVERLAP_PCT=0.25
ALLOWED_MIME=application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/html,text/plain
OCR_ENABLE=false

# RAG Configuration (Bloc 3)
RAG_TOP_K=50
RAG_CITATIONS_MIN=2
RAG_CONFIDENCE_THRESHOLD=0.6
RERANKER_MAX_INPUT_CHARS=512
RERANKER_MAX_CANDIDATES=100
RERANKER_ALPHA=0.30
RERANKER_BETA=0.70

# Microservices (Bloc 2 & 3)
RERANKER_API_URL=http://reranker:8000
RERANKER_MODEL_NAME=BAAI/bge-reranker-v2-m3
LLM_API_URL=http://ollama:11434
LLM_MODEL_NAME=qwen2:7b-instruct

# URL Configuration
# En production, spécifier l'URL backend si différente de l'auto-détection
BACKEND_EXTERNAL_URL=
# En production, spécifier l'URL frontend si nécessaire
FRONTEND_EXTERNAL_URL=

# Configuration CORS
# En développement: laisser vide pour autoriser localhost automatiquement
# En production: spécifier les domaines autorisés (Vercel domains sont automatiquement autorisés)
# Exemple: CORS_ALLOWED_ORIGINS=https://mondomaine.com,https://autredomaine.com
CORS_ALLOWED_ORIGINS=

# Variables d'environnement
NODE_ENV=development
