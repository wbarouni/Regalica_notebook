{"ast":null,"code":"import _asyncToGenerator from \"/home/ubuntu/Regalica_notebook/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil, debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { UploadDropzoneComponent } from '../features/upload/upload-dropzone.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/ingest.service\";\nimport * as i2 from \"../core/services/viewer.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction SidebarSourcesComponent_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function SidebarSourcesComponent_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.clearSearch());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 6);\n    i0.ɵɵelement(2, \"path\", 38);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SidebarSourcesComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵelement(1, \"div\", 40);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"Loading documents...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SidebarSourcesComponent_div_52_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function SidebarSourcesComponent_div_52_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.toggleUpload());\n    });\n    i0.ɵɵtext(1, \" Upload your first document \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SidebarSourcesComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 42);\n    i0.ɵɵelement(2, \"path\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"p\", 44);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, SidebarSourcesComponent_div_52_button_5_Template, 2, 0, \"button\", 45);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.filters.search || ctx_r1.filters.mimeType || ctx_r1.filters.status ? \"No documents match your filters\" : \"No documents uploaded yet\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.showUpload && !ctx_r1.filters.search && !ctx_r1.filters.mimeType && !ctx_r1.filters.status);\n  }\n}\nfunction SidebarSourcesComponent_div_53_div_12_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 63);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const doc_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", doc_r5.chunksCount, \" chunks\");\n  }\n}\nfunction SidebarSourcesComponent_div_53_div_12_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 63);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const doc_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", doc_r5.tokensCount, \" tokens\");\n  }\n}\nfunction SidebarSourcesComponent_div_53_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 61);\n    i0.ɵɵtemplate(1, SidebarSourcesComponent_div_53_div_12_span_1_Template, 2, 1, \"span\", 62)(2, SidebarSourcesComponent_div_53_div_12_span_2_Template, 2, 1, \"span\", 62);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const doc_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", doc_r5.chunksCount);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", doc_r5.tokensCount);\n  }\n}\nfunction SidebarSourcesComponent_div_53__svg_svg_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 6);\n    i0.ɵɵelement(1, \"path\", 64);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SidebarSourcesComponent_div_53__svg_svg_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 65);\n    i0.ɵɵelement(1, \"path\", 31);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SidebarSourcesComponent_div_53__svg_svg_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 6);\n    i0.ɵɵelement(1, \"path\", 66);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SidebarSourcesComponent_div_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 47);\n    i0.ɵɵlistener(\"click\", function SidebarSourcesComponent_div_53_Template_div_click_0_listener() {\n      const doc_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectDocument(doc_r5));\n    });\n    i0.ɵɵelementStart(1, \"div\", 48);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 3);\n    i0.ɵɵelement(3, \"path\", 43);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"div\", 49)(5, \"h3\", 50);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 51)(8, \"span\", 52);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\", 53);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(12, SidebarSourcesComponent_div_53_div_12_Template, 3, 2, \"div\", 54);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 55);\n    i0.ɵɵtemplate(14, SidebarSourcesComponent_div_53__svg_svg_14_Template, 2, 0, \"svg\", 56)(15, SidebarSourcesComponent_div_53__svg_svg_15_Template, 2, 0, \"svg\", 57)(16, SidebarSourcesComponent_div_53__svg_svg_16_Template, 2, 0, \"svg\", 56);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 58);\n    i0.ɵɵlistener(\"click\", function SidebarSourcesComponent_div_53_Template_button_click_17_listener($event) {\n      const doc_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.openDocument(doc_r5, $event));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(18, \"svg\", 6);\n    i0.ɵɵelement(19, \"path\", 59)(20, \"path\", 60);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const doc_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"selected\", ctx_r1.selectedDocumentId === doc_r5.id);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(\"type-\" + ctx_r1.getDocumentTypeClass(doc_r5.mimeType));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"title\", doc_r5.title);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(doc_r5.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.formatFileSize(doc_r5.size));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.formatDate(doc_r5.uploadedAt));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", doc_r5.chunksCount || doc_r5.tokensCount);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(\"status-\" + doc_r5.status);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", doc_r5.status === \"ready\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", doc_r5.status === \"processing\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", doc_r5.status === \"error\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", doc_r5.status !== \"ready\");\n  }\n}\nfunction SidebarSourcesComponent_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 67)(1, \"button\", 68);\n    i0.ɵɵlistener(\"click\", function SidebarSourcesComponent_div_54_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goToPage(ctx_r1.currentPage - 1));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 6);\n    i0.ɵɵelement(3, \"path\", 69);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 70);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 68);\n    i0.ɵɵlistener(\"click\", function SidebarSourcesComponent_div_54_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goToPage(ctx_r1.currentPage + 1));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(7, \"svg\", 6);\n    i0.ɵɵelement(8, \"path\", 71);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r1.currentPage === 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r1.currentPage, \" / \", ctx_r1.totalPages, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r1.currentPage === ctx_r1.totalPages);\n  }\n}\nexport let SidebarSourcesComponent = /*#__PURE__*/(() => {\n  class SidebarSourcesComponent {\n    constructor(ingestService, viewerService) {\n      this.ingestService = ingestService;\n      this.viewerService = viewerService;\n      this.documents = [];\n      this.totalDocuments = 0;\n      this.currentPage = 1;\n      this.totalPages = 1;\n      this.pageSize = 20;\n      this.isLoading = false;\n      this.showUpload = false;\n      this.selectedDocumentId = null;\n      this.filters = {\n        search: '',\n        mimeType: '',\n        status: ''\n      };\n      this.destroy$ = new Subject();\n      this.filterChange$ = new Subject();\n    }\n    ngOnInit() {\n      this.setupFilterDebounce();\n      this.loadDocuments();\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    /**\n     * Configure le debounce pour les filtres\n     */\n    setupFilterDebounce() {\n      this.filterChange$.pipe(debounceTime(300), distinctUntilChanged(), takeUntil(this.destroy$)).subscribe(() => {\n        this.currentPage = 1;\n        this.loadDocuments();\n      });\n    }\n    /**\n     * Charge la liste des documents\n     */\n    loadDocuments() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.isLoading = true;\n        try {\n          const response = yield _this.ingestService.getDocuments({\n            page: _this.currentPage,\n            pageSize: _this.pageSize,\n            ..._this.filters\n          }).toPromise();\n          if (response) {\n            _this.documents = response.items;\n            _this.totalDocuments = response.total;\n            _this.totalPages = response.totalPages;\n          }\n        } catch (error) {\n          console.error('Failed to load documents:', error);\n          _this.documents = [];\n          _this.totalDocuments = 0;\n          _this.totalPages = 1;\n        } finally {\n          _this.isLoading = false;\n        }\n      })();\n    }\n    /**\n     * Appelé quand les filtres changent\n     */\n    onFilterChange() {\n      this.filterChange$.next();\n    }\n    /**\n     * Efface la recherche\n     */\n    clearSearch() {\n      this.filters.search = '';\n      this.onFilterChange();\n    }\n    /**\n     * Actualise la liste des documents\n     */\n    refreshDocuments() {\n      this.loadDocuments();\n    }\n    /**\n     * Bascule l'affichage du panneau d'upload\n     */\n    toggleUpload() {\n      this.showUpload = !this.showUpload;\n    }\n    /**\n     * Sélectionne un document\n     */\n    selectDocument(doc) {\n      this.selectedDocumentId = doc.id;\n    }\n    /**\n     * Ouvre un document dans le viewer\n     */\n    openDocument(doc, event) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        event.stopPropagation();\n        if (doc.status !== 'ready') return;\n        try {\n          // Charger le contenu du document\n          const content = yield _this2.ingestService.getDocumentContent(doc.id).toPromise();\n          if (content) {\n            // Charger dans le viewer\n            _this2.viewerService.loadDocument({\n              id: doc.id,\n              title: doc.title,\n              pages: (content.pages || []).map(page => ({\n                ...page,\n                spans: []\n              }))\n            });\n            _this2.selectedDocumentId = doc.id;\n          }\n        } catch (error) {\n          console.error('Failed to open document:', error);\n        }\n      })();\n    }\n    /**\n     * Va à une page spécifique\n     */\n    goToPage(page) {\n      if (page >= 1 && page <= this.totalPages && page !== this.currentPage) {\n        this.currentPage = page;\n        this.loadDocuments();\n      }\n    }\n    /**\n     * Appelé quand un upload se termine avec succès\n     */\n    onUploadComplete(document) {\n      // Actualiser la liste\n      this.refreshDocuments();\n      // Fermer le panneau d'upload\n      this.showUpload = false;\n    }\n    /**\n     * Appelé quand un upload échoue\n     */\n    onUploadError(error) {\n      console.error('Upload error:', error);\n      // TODO: Afficher une notification d'erreur\n    }\n    /**\n     * TrackBy pour optimiser le rendu de la liste\n     */\n    trackByDocId(index, doc) {\n      return doc.id;\n    }\n    /**\n     * Obtient la classe CSS pour le type de document\n     */\n    getDocumentTypeClass(mimeType) {\n      if (mimeType.includes('pdf')) return 'pdf';\n      if (mimeType.includes('word')) return 'word';\n      if (mimeType.includes('html')) return 'html';\n      if (mimeType.includes('text')) return 'text';\n      return 'unknown';\n    }\n    /**\n     * Formate la taille d'un fichier\n     */\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 B';\n      const k = 1024;\n      const sizes = ['B', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n    }\n    /**\n     * Formate une date\n     */\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      const now = new Date();\n      const diffMs = now.getTime() - date.getTime();\n      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n      if (diffDays === 0) {\n        return 'Today';\n      } else if (diffDays === 1) {\n        return 'Yesterday';\n      } else if (diffDays < 7) {\n        return `${diffDays} days ago`;\n      } else {\n        return date.toLocaleDateString();\n      }\n    }\n    static {\n      this.ɵfac = function SidebarSourcesComponent_Factory(t) {\n        return new (t || SidebarSourcesComponent)(i0.ɵɵdirectiveInject(i1.IngestService), i0.ɵɵdirectiveInject(i2.ViewerService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SidebarSourcesComponent,\n        selectors: [[\"app-sidebar-sources\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 55,\n        vars: 21,\n        consts: [[1, \"sources-sidebar\"], [1, \"sidebar-header\"], [1, \"sidebar-title\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"], [\"title\", \"Toggle upload panel\", 1, \"upload-toggle-btn\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-4\", \"h-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 4v16m8-8H4\"], [1, \"upload-panel\"], [3, \"uploadComplete\", \"uploadError\"], [1, \"filters-section\"], [1, \"search-box\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"search-icon\", \"w-4\", \"h-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"], [\"type\", \"text\", \"placeholder\", \"Search documents...\", 1, \"search-input\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"clear-search-btn\", \"title\", \"Clear search\", 3, \"click\", 4, \"ngIf\"], [1, \"filter-group\"], [1, \"filter-label\"], [1, \"filter-select\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\"], [\"value\", \"application/pdf\"], [\"value\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"], [\"value\", \"text/html\"], [\"value\", \"text/plain\"], [\"value\", \"ready\"], [\"value\", \"processing\"], [\"value\", \"error\"], [1, \"documents-section\"], [1, \"documents-header\"], [1, \"documents-count\"], [\"title\", \"Refresh documents\", 1, \"refresh-btn\", 3, \"click\", \"disabled\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"], [1, \"documents-list\"], [\"class\", \"loading-state\", 4, \"ngIf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [\"class\", \"document-item\", 3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"pagination\", 4, \"ngIf\"], [\"title\", \"Clear search\", 1, \"clear-search-btn\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M6 18L18 6M6 6l12 12\"], [1, \"loading-state\"], [1, \"loading-spinner\"], [1, \"empty-state\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-12\", \"h-12\", \"empty-icon\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"], [1, \"empty-message\"], [\"class\", \"upload-cta-btn\", 3, \"click\", 4, \"ngIf\"], [1, \"upload-cta-btn\", 3, \"click\"], [1, \"document-item\", 3, \"click\"], [1, \"document-icon\"], [1, \"document-info\"], [1, \"document-title\", 3, \"title\"], [1, \"document-meta\"], [1, \"document-size\"], [1, \"document-date\"], [\"class\", \"document-stats\", 4, \"ngIf\"], [1, \"document-status\"], [\"class\", \"w-4 h-4\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 4, \"ngIf\"], [\"class\", \"w-4 h-4 animate-spin\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 4, \"ngIf\"], [\"title\", \"Open document\", 1, \"document-action-btn\", 3, \"click\", \"disabled\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"], [1, \"document-stats\"], [\"class\", \"stat\", 4, \"ngIf\"], [1, \"stat\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M5 13l4 4L19 7\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-4\", \"h-4\", \"animate-spin\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"], [1, \"pagination\"], [1, \"pagination-btn\", 3, \"click\", \"disabled\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 19l-7-7 7-7\"], [1, \"pagination-info\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M9 5l7 7-7 7\"]],\n        template: function SidebarSourcesComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(3, \"svg\", 3);\n            i0.ɵɵelement(4, \"path\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(5, \" Sources \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(6, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function SidebarSourcesComponent_Template_button_click_6_listener() {\n              return ctx.toggleUpload();\n            });\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(7, \"svg\", 6);\n            i0.ɵɵelement(8, \"path\", 7);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(9, \"div\", 8)(10, \"app-upload-dropzone\", 9);\n            i0.ɵɵlistener(\"uploadComplete\", function SidebarSourcesComponent_Template_app_upload_dropzone_uploadComplete_10_listener($event) {\n              return ctx.onUploadComplete($event);\n            })(\"uploadError\", function SidebarSourcesComponent_Template_app_upload_dropzone_uploadError_10_listener($event) {\n              return ctx.onUploadError($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"div\", 10)(12, \"div\", 11);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(13, \"svg\", 12);\n            i0.ɵɵelement(14, \"path\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(15, \"input\", 14);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SidebarSourcesComponent_Template_input_ngModelChange_15_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.filters.search, $event) || (ctx.filters.search = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"ngModelChange\", function SidebarSourcesComponent_Template_input_ngModelChange_15_listener() {\n              return ctx.onFilterChange();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(16, SidebarSourcesComponent_button_16_Template, 3, 0, \"button\", 15);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"div\", 16)(18, \"label\", 17);\n            i0.ɵɵtext(19, \"Type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"select\", 18);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SidebarSourcesComponent_Template_select_ngModelChange_20_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.filters.type, $event) || (ctx.filters.type = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"ngModelChange\", function SidebarSourcesComponent_Template_select_ngModelChange_20_listener() {\n              return ctx.onFilterChange();\n            });\n            i0.ɵɵelementStart(21, \"option\", 19);\n            i0.ɵɵtext(22, \"All types\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"option\", 20);\n            i0.ɵɵtext(24, \"PDF\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"option\", 21);\n            i0.ɵɵtext(26, \"Word\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"option\", 22);\n            i0.ɵɵtext(28, \"HTML\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"option\", 23);\n            i0.ɵɵtext(30, \"Text\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(31, \"div\", 16)(32, \"label\", 17);\n            i0.ɵɵtext(33, \"Status\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"select\", 18);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SidebarSourcesComponent_Template_select_ngModelChange_34_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.filters.status, $event) || (ctx.filters.status = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"ngModelChange\", function SidebarSourcesComponent_Template_select_ngModelChange_34_listener() {\n              return ctx.onFilterChange();\n            });\n            i0.ɵɵelementStart(35, \"option\", 19);\n            i0.ɵɵtext(36, \"All status\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(37, \"option\", 24);\n            i0.ɵɵtext(38, \"Ready\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"option\", 25);\n            i0.ɵɵtext(40, \"Processing\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(41, \"option\", 26);\n            i0.ɵɵtext(42, \"Error\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(43, \"div\", 27)(44, \"div\", 28)(45, \"span\", 29);\n            i0.ɵɵtext(46);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(47, \"button\", 30);\n            i0.ɵɵlistener(\"click\", function SidebarSourcesComponent_Template_button_click_47_listener() {\n              return ctx.refreshDocuments();\n            });\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(48, \"svg\", 6);\n            i0.ɵɵelement(49, \"path\", 31);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(50, \"div\", 32);\n            i0.ɵɵtemplate(51, SidebarSourcesComponent_div_51_Template, 4, 0, \"div\", 33)(52, SidebarSourcesComponent_div_52_Template, 6, 2, \"div\", 34)(53, SidebarSourcesComponent_div_53_Template, 21, 15, \"div\", 35);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(54, SidebarSourcesComponent_div_54_Template, 9, 4, \"div\", 36);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(6);\n            i0.ɵɵclassProp(\"active\", ctx.showUpload);\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"expanded\", ctx.showUpload);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filters.search);\n            i0.ɵɵattribute(\"aria-label\", \"Search documents\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.filters.search);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filters.type);\n            i0.ɵɵadvance(14);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filters.status);\n            i0.ɵɵadvance(12);\n            i0.ɵɵtextInterpolate2(\" \", ctx.totalDocuments, \" document\", ctx.totalDocuments !== 1 ? \"s\" : \"\", \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"animate-spin\", ctx.isLoading);\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"loading\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading && ctx.documents.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.documents.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.documents)(\"ngForTrackBy\", ctx.trackByDocId);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.totalPages > 1);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, FormsModule, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, UploadDropzoneComponent],\n        styles: [\"@charset \\\"UTF-8\\\";.sources-sidebar[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#fff;border:1px solid #e5e7eb}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid #e5e7eb;background:#f9fafb}.sidebar-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0;font-size:.875rem;font-weight:600;color:#111827}.upload-toggle-btn[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#6b7280;padding:.375rem;border-radius:.375rem;cursor:pointer;transition:all .15s}.upload-toggle-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;border-color:#9ca3af}.upload-toggle-btn.active[_ngcontent-%COMP%]{background:#111827;color:#fff;border-color:#111827}.upload-panel[_ngcontent-%COMP%]{overflow:hidden;transition:all .3s ease;max-height:0}.upload-panel.expanded[_ngcontent-%COMP%]{max-height:200px;padding:1rem;border-bottom:1px solid #e5e7eb}.filters-section[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #e5e7eb;background:#f9fafb}.search-box[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.search-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#9ca3af}.search-input[_ngcontent-%COMP%]{width:100%;padding:.5rem .75rem .5rem 2.5rem;border:1px solid #d1d5db;border-radius:.375rem;font-size:.875rem;background:#fff}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#111827;box-shadow:0 0 0 1px #111827}.clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#9ca3af;cursor:pointer;padding:.25rem}.clear-search-btn[_ngcontent-%COMP%]:hover{color:#6b7280}.filter-group[_ngcontent-%COMP%]{margin-bottom:.75rem}.filter-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.filter-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;font-weight:500;color:#374151;margin-bottom:.25rem}.filter-select[_ngcontent-%COMP%]{width:100%;padding:.375rem .5rem;border:1px solid #d1d5db;border-radius:.375rem;font-size:.875rem;background:#fff}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#111827}.documents-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.documents-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid #e5e7eb;background:#fff}.documents-count[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-weight:500}.refresh-btn[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#6b7280;padding:.375rem;border-radius:.375rem;cursor:pointer;transition:all .15s}.refresh-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6;border-color:#9ca3af}.refresh-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.documents-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.documents-list.loading[_ngcontent-%COMP%]{opacity:.6}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;text-align:center}.loading-spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:2px solid #e5e7eb;border-top:2px solid #111827;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-icon[_ngcontent-%COMP%]{color:#d1d5db;margin-bottom:1rem}.empty-message[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;margin:0 0 1rem}.upload-cta-btn[_ngcontent-%COMP%]{background:#111827;color:#fff;border:none;padding:.5rem 1rem;border-radius:.375rem;font-size:.875rem;cursor:pointer;transition:background-color .15s}.upload-cta-btn[_ngcontent-%COMP%]:hover{background:#374151}.document-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-bottom:1px solid #f3f4f6;cursor:pointer;transition:background-color .15s}.document-item[_ngcontent-%COMP%]:hover{background:#f9fafb}.document-item.selected[_ngcontent-%COMP%]{background:#f3f4f6;border-left:3px solid #111827}.document-icon[_ngcontent-%COMP%]{flex-shrink:0;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;border-radius:.375rem}.document-icon.type-pdf[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.document-icon.type-word[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.document-icon.type-html[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.document-icon.type-text[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.document-icon.type-unknown[_ngcontent-%COMP%]{background:#f3f4f6;color:#9ca3af}.document-info[_ngcontent-%COMP%]{flex:1;min-width:0}.document-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#111827;margin:0 0 .25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.document-meta[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.75rem;color:#6b7280}.document-stats[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.75rem;color:#9ca3af;margin-top:.25rem}.stat[_ngcontent-%COMP%]:not(:last-child):after{content:\\\"\\\\2022\\\";margin-left:.5rem}.document-status[_ngcontent-%COMP%]{flex-shrink:0}.document-status.status-ready[_ngcontent-%COMP%]{color:#16a34a}.document-status.status-processing[_ngcontent-%COMP%]{color:#d97706}.document-status.status-error[_ngcontent-%COMP%]{color:#dc2626}.document-action-btn[_ngcontent-%COMP%]{flex-shrink:0;background:none;border:1px solid #d1d5db;color:#6b7280;padding:.375rem;border-radius:.375rem;cursor:pointer;transition:all .15s}.document-action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6;border-color:#9ca3af}.document-action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:1rem;border-top:1px solid #e5e7eb;background:#fff}.pagination-btn[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#6b7280;padding:.375rem;border-radius:.375rem;cursor:pointer;transition:all .15s}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6;border-color:#9ca3af}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.pagination-info[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;font-weight:500}@media (max-width: 768px){.sidebar-header[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.75rem}.document-item[_ngcontent-%COMP%]{padding:.5rem .75rem}}\"]\n      });\n    }\n  }\n  return SidebarSourcesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}